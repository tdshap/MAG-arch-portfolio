# qzready

> For auto-generating qz ready files

## Getting Started
This plugin requires Grunt `~0.4.4`

If you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the [Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a [Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. 

**Please note**

This plugin is meant to be used in conjunction with the "plus-ad-template" found here: [Plus Ad Template](https://bitbucket.org/quartz/plus-ad-template). Cloning this template will provide a ready-to-use ad template with the ready file generator already integrated. 

The plugin currently resides in a [Gemfury](https://gemfury.com/) repository. To install the plugin add the package to your `package.json` file using:

```json
{
  "dependencies": {
    "qzready": "https://npm.fury.io/RqRFE7xEN8tXpXcwPDo2/pixelworlds/qzready/-/latest.tgz"
  }
}
```

Alternatively, you can manually add the plugin using:

```shell
npm install qzready --registry https://npm.fury.io/RqRFE7xEN8tXpXcwPDo2/pixelworlds/
```

Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:

```js
grunt.loadNpmTasks('qzready');
```

## The "qzready" task

### Overview
In your project's Gruntfile, add a section named `qzready` to the data object passed into `grunt.initConfig()`.

```js
grunt.initConfig({
  qzready: {
    deploy: {
      options: {
        base: 'http://ads.quartz.cc/sponsors',
        client: 'example_client',
        campaign: 'example_campaign',
        date: '2014-04-10',
        unit: 'desktop',
        internal_scripts: [
          ''
        ],
        external_scripts: [
          'http://app.qz.com/js/vendor/jQuery-min.js',
          'http://app.qz.com/js/frameMessager/min/frameMessager.min.2.5.41.js',
          'http://app.qz.com/js/frameMessager/QZIX.js'
        ]
      }
    }
  },
});
```

### Options

#### options.base
Type: `String`
Default value: `'http://ads.quartz.cc/sponsors'`

THe base url for the ad assets

#### options.client
Type: `String`
Default value: `example_client`

Client name

#### options.campaign
Type: `String`
Default value: `example_campaign`

Campaign name

#### options.date
Type: `String`
Default value: `2014-04-15`

Date of the campaign in the format `yyyy-mm-dd`

#### options.unit
Type: `String`
Default value: `desktop`

The unit type. Should be either `desktop`, `tablet`, or `mobile`

#### options.internal_scripts
Type: `Array`
Default value: `[]`

An array of relative paths to local scripts that will be included in the ready file. Ex: `["js/iscroll.js", ...]`

#### options.external_scripts
Type: `Array`
Default value:
```
[
  "http://app.qz.com/js/vendor/jQuery-min.js",
  "http://app.qz.com/js/frameMessager/min/frameMessager.min.3.0.2.js",
  "http://app.qz.com/js/frameMessager/QZIX.js"
]
```

An array of relative paths to external scripts that will be included in the ready file.

Please note that the following script will be auto generated and does **not** need to be included in the external_scripts array:

```html
<script id="ix-namer" data-ix-name="auto-generated" src="http://ads.qz.com/js/qzad/qzad-1.1.js" type="text/javascript"></script>
```
### Usage Examples

## Contributing

This project is currently hosted at [https://bitbucket.org/quartz/qzready](https://bitbucket.org/quartz/qzready)

## Release History
0.1.0 - Initial working working
0.3.2 - Added automatic version updating based on the "build" node in the template's package.json file.

## Road Map
- Add the ability to automatically delete older versions of the same ready file
- Add the ability to automatically check for and add a target="_blank" to links
- Add the ability to automatically add IX tracking - this might take some work - need to talk to John about this
- Add the ability to automatically install the dependencies (as opposed to installing them from the template)